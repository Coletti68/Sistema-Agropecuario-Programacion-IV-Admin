{% extends 'base.html' %}

{% block title %}Dashboard - Admin Agro{% endblock %}

{% block content %}
<div class="dashboard-container">
    <h1 class="dashboard-title">ðŸ“Š Panel de Control</h1>
    <p class="dashboard-subtitle">Resumen general del sistema agropecuario</p>

    <!-- Grid de tarjetas estadÃ­sticas -->
    <div class="stats-grid">
        <!-- Card: Usuarios -->
        <div class="stat-card stat-card-users">
            <div class="stat-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
            </div>
            <div class="stat-content">
                <h3 class="stat-number">{{ total_usuarios }}</h3>
                <p class="stat-label">Usuarios Activos</p>
            </div>
            <a href="{% url 'listar_usuarios' %}" class="stat-link">Ver todos â†’</a>
        </div>

        <!-- Card: Cultivos -->
        <div class="stat-card stat-card-crops">
            <div class="stat-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2v20M2 12h20M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2z"></path>
                    <path d="M12 6v12M6 12h12"></path>
                </svg>
            </div>
            <div class="stat-content">
                <h3 class="stat-number">{{ total_cultivos }}</h3>
                <p class="stat-label">Cultivos Registrados</p>
            </div>
            <a href="{% url 'panel_usuarios_cultivos' %}" class="stat-link">Ver todos â†’</a>
        </div>

        <!-- Card: Solicitudes -->
        <div class="stat-card stat-card-requests">
            <div class="stat-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                    <polyline points="10 9 9 9 8 9"></polyline>
                </svg>
            </div>
            <div class="stat-content">
                <h3 class="stat-number">{{ total_solicitudes }}</h3>
                <p class="stat-label">Solicitudes Totales</p>
                {% if solicitudes_pendientes > 0 %}
                <span class="stat-badge badge-warning">{{ solicitudes_pendientes }} pendientes</span>
                {% endif %}
            </div>
            <a href="{% url 'listar_solicitudes' %}" class="stat-link">Ver todas â†’</a>
        </div>

        <!-- Card: Proveedores -->
        <div class="stat-card stat-card-suppliers">
            <div class="stat-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
            </div>
            <div class="stat-content">
                <h3 class="stat-number">{{ total_proveedores }}</h3>
                <p class="stat-label">Proveedores Activos</p>
            </div>
            <a href="{% url 'listar_proveedores' %}" class="stat-link">Ver todos â†’</a>
        </div>

        <!-- Card: Insumos -->
        <div class="stat-card stat-card-products">
            <div class="stat-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z">
                    </path>
                    <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                    <line x1="12" y1="22.08" x2="12" y2="12"></line>
                </svg>
            </div>
            <div class="stat-content">
                <h3 class="stat-number">{{ total_insumos }}</h3>
                <p class="stat-label">Insumos Disponibles</p>
                {% if insumos_stock_bajo > 0 %}
                <span class="stat-badge badge-danger">{{ insumos_stock_bajo }} stock bajo</span>
                {% endif %}
            </div>
            <a href="{% url 'listar_insumos' %}" class="stat-link">Ver todos â†’</a>
        </div>

        <!-- Card: Acceso RÃ¡pido -->
        <div class="stat-card stat-card-quick">
            <div class="stat-content">
                <h3 class="stat-label" style="margin-bottom: 20px;">âš¡ Accesos RÃ¡pidos</h3>
                <div class="quick-actions">
                    <a href="{% url 'crear_usuario' %}" class="quick-action-btn">
                        <span>âž•</span> Nuevo Usuario
                    </a>
                    <a href="{% url 'crear_proveedor' %}" class="quick-action-btn">
                        <span>âž•</span> Nuevo Proveedor
                    </a>
                    <a href="{% url 'crear_insumo' %}" class="quick-action-btn">
                        <span>âž•</span> Nuevo Insumo
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- SecciÃ³n de informaciÃ³n adicional -->
    <div class="dashboard-info">
        <div class="info-card">
            <h3>ðŸ’¡ Bienvenido al Sistema</h3>
            <p>Gestiona de manera eficiente todos los aspectos de tu operaciÃ³n agropecuaria desde este panel
                centralizado.</p>
        </div>
    </div>
</div>

<style>
    /* Dashboard especÃ­fico */
    .dashboard-container {
        animation: fadeIn 0.6s ease;
    }

    .dashboard-title {
        font-size: 2.5rem;
        font-weight: 800;
        background: linear-gradient(135deg, var(--primary-green-dark), var(--primary-green));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 10px;
        letter-spacing: -1px;
    }

    .dashboard-subtitle {
        color: var(--text-secondary);
        font-size: 1.1rem;
        margin-bottom: 40px;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 25px;
        margin-bottom: 30px;
    }

    .stat-card {
        background: var(--bg-card);
        border-radius: var(--radius-lg);
        padding: 30px;
        box-shadow: var(--shadow-md);
        border: 2px solid transparent;
        transition: all var(--transition-normal);
        position: relative;
        overflow: hidden;
        animation: fadeIn 0.6s ease backwards;
    }

    .stat-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, var(--primary-green), var(--primary-green-light));
        transform: scaleX(0);
        transition: transform var(--transition-normal);
    }

    .stat-card:hover {
        transform: translateY(-8px);
        box-shadow: var(--shadow-xl);
        border-color: rgba(16, 185, 129, 0.2);
    }

    .stat-card:hover::before {
        transform: scaleX(1);
    }

    /* Colores especÃ­ficos para cada tarjeta */
    .stat-card-users {
        animation-delay: 0.1s;
    }

    .stat-card-users .stat-icon {
        background: linear-gradient(135deg, #3b82f6, #2563eb);
    }

    .stat-card-crops {
        animation-delay: 0.2s;
    }

    .stat-card-crops .stat-icon {
        background: linear-gradient(135deg, var(--primary-green), var(--primary-green-dark));
    }

    .stat-card-requests {
        animation-delay: 0.3s;
    }

    .stat-card-requests .stat-icon {
        background: linear-gradient(135deg, #f59e0b, #d97706);
    }

    .stat-card-suppliers {
        animation-delay: 0.4s;
    }

    .stat-card-suppliers .stat-icon {
        background: linear-gradient(135deg, #8b5cf6, #7c3aed);
    }

    .stat-card-products {
        animation-delay: 0.5s;
    }

    .stat-card-products .stat-icon {
        background: linear-gradient(135deg, #ec4899, #db2777);
    }

    .stat-card-quick {
        animation-delay: 0.6s;
    }

    .stat-icon {
        width: 70px;
        height: 70px;
        border-radius: var(--radius-md);
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 20px;
        color: white;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
    }

    .stat-content {
        flex: 1;
    }

    .stat-number {
        font-size: 3rem;
        font-weight: 800;
        color: var(--text-primary);
        margin: 10px 0;
        line-height: 1;
        letter-spacing: -2px;
    }

    .stat-label {
        font-size: 1rem;
        color: var(--text-secondary);
        font-weight: 600;
        margin-bottom: 15px;
    }

    .stat-badge {
        display: inline-block;
        padding: 4px 10px;
        border-radius: var(--radius-sm);
        font-size: 0.75rem;
        font-weight: 600;
        margin-top: 8px;
    }

    .stat-link {
        display: inline-flex;
        align-items: center;
        color: var(--primary-green);
        font-weight: 600;
        text-decoration: none;
        margin-top: 15px;
        transition: all var(--transition-fast);
        font-size: 0.95rem;
    }

    .stat-link:hover {
        color: var(--primary-green-dark);
        transform: translateX(5px);
    }

    /* Quick Actions */
    .quick-actions {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

    .quick-action-btn {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 12px 18px;
        background: linear-gradient(135deg, var(--primary-green-light), var(--primary-green));
        color: white;
        border-radius: var(--radius-md);
        text-decoration: none;
        font-weight: 600;
        transition: all var(--transition-normal);
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2);
    }

    .quick-action-btn:hover {
        transform: translateX(5px);
        box-shadow: 0 6px 20px rgba(16, 185, 129, 0.3);
    }

    .quick-action-btn span {
        font-size: 1.2rem;
    }

    /* Info Card */
    .dashboard-info {
        margin-top: 30px;
    }

    .info-card {
        background: linear-gradient(135deg, rgba(16, 185, 129, 0.05), rgba(52, 211, 153, 0.05));
        border: 2px solid rgba(16, 185, 129, 0.1);
        border-radius: var(--radius-lg);
        padding: 25px 30px;
        animation: fadeIn 0.8s ease 0.7s backwards;
    }

    .info-card h3 {
        color: var(--text-primary);
        font-size: 1.3rem;
        font-weight: 700;
        margin-bottom: 10px;
    }

    .info-card p {
        color: var(--text-secondary);
        font-size: 1rem;
        line-height: 1.6;
        margin: 0;
    }

    /* Responsive */
    @media (max-width: 768px) {
        .stats-grid {
            grid-template-columns: 1fr;
        }

        .dashboard-title {
            font-size: 2rem;
        }

        .stat-number {
            font-size: 2.5rem;
        }
    }
</style>
{% endblock %}