{% extends 'base.html' %}
{% block title %}Listado de Insumos{% endblock %}

{% block content %}
<h2>üì¶ Insumos</h2>

{# Mensaje global si hay insumos cr√≠ticos #}
{% if hay_critico %}
<p style="color: red; font-weight: bold;">
    ‚ö†Ô∏è Atenci√≥n: Algunos insumos est√°n por debajo del stock m√≠nimo.
</p>
{% endif %}

<table border="1" cellpadding="5" cellspacing="0">
    <thead>
        <tr>
            <th>Nombre</th>
            <th>Descripci√≥n</th>
            <th>Precio</th>
            <th>Stock</th>
            <th>Stock m√≠nimo</th>
            <th>Estado</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
        {% for insumo in insumos %}
        <tr {% if insumo.critico %}style="background-color: #f8d7da;" title="Stock cr√≠tico"{% endif %}>
            <td>{{ insumo.nombre }}</td>
            <td>{{ insumo.descripcion }}</td>
            <td>{{ insumo.precio }}</td>
            <td>{{ insumo.stock }}</td>
            <td>{{ insumo.stock_minimo }}</td>
            <td>{% if insumo.activo %}‚úÖ Activo{% else %}‚ùå Inactivo{% endif %}</td>
            <td>
                <a href="{% url 'editar_insumo' insumo.pk %}">Editar</a> |
                {% if insumo.activo %}
                    <a href="{% url 'desactivar_insumo' insumo.pk %}">Desactivar</a>
                {% else %}
                    <a href="{% url 'activar_insumo' insumo.pk %}">Activar</a>
                {% endif %}
            </td>
        </tr>
        {% empty %}
        <tr><td colspan="7">No hay insumos registrados.</td></tr>
        {% endfor %}
    </tbody>
</table>

<br>
<a href="{% url 'crear_insumo' %}">‚Üê Nuevo Insumo</a>
{% endblock %}
