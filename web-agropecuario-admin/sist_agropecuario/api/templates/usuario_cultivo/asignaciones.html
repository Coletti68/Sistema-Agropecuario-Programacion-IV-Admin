{% extends 'base.html' %}
{% block title %}Panel de Asignaciones{% endblock %}
{% block content %}
<h2>ðŸ“‹ Panel de Asignaciones</h2>

<form method="get" style="margin-bottom:20px;">
    <label>Filtrar por usuario:</label>
    <select name="usuarioid">
        <option value="">Todos</option>
        {% for usuario in usuarios %}
        <option value="{{ usuario.pk }}" {% if request.GET.usuarioid == usuario.pk|stringformat:"s" %}selected{% endif %}>
            {{ usuario.nombre }}
        </option>
        {% endfor %}
    </select>

    <label>Filtrar por cultivo:</label>
    <select name="cultivoid">
        <option value="">Todos</option>
        {% for cultivo in cultivos %}
        <option value="{{ cultivo.pk }}" {% if request.GET.cultivoid == cultivo.pk|stringformat:"s" %}selected{% endif %}>
            {{ cultivo.nombre }}
        </option>
        {% endfor %}
    </select>

    <button type="submit">Filtrar</button>
</form>

<a href="{% url 'crear_usuariocultivo' %}">âž• Nueva AsignaciÃ³n</a>
<hr>

{% include 'usuario_cultivo/listar.html' with asignaciones=asignaciones %}
{% endblock %}
